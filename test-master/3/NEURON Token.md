**NEURON Token**

**Техническая документация**

Оглавление

1. [Контракт NRN  как основа NEURON Token](#_jv7fkj3n9i1f)
2. [Система](#_dh33a2y5371r)

	2.1. [Диаграмма взаимодействия на уровне Сети](#_ek5hbln14u9)
	
	2.2. [Диаграмма взаимодействия на уровне системы](#_dubhxfjuy36d)
	
3. [Дивиденды](#_hr28y0fdjzes)

	3.1. [Распределение дивидендов](#_motz8s596ftm)
	
	3.2. [Механизм начисления дивидендов](#_1ng0ln1b5ogs)
	
	3.3. [Распределение прибыли](#_eht0t1et6bxz)
4. [Обзор](#_fs7kwg8afz5y)
5. [Бизнес\-логика контракта](#_v7iuojesj3lz)

	5.1. [ERC\-20](#_hx4c423n7p5r)
	
	5.2. [Дополнительная логика](#_ef7b49xm1tji)
6. [Тестирование токенного контракта\.](#_kf1n4pr3ksyj)
	
	6.1. [Компиляция и размещение контракта в блокчейне\.](#_4e64e0pyjoxy)
	
	6.2. [Проверка состояния контракта после создания\.](#_igrev1wzkdmv)
	
	6.3. [Проверка названия и символа токена\.](#_e7gi8x5aiiy0)
	
	6.4. [Проверка возможности передать токены\.](#_th9kc88nqmlc)
	
	6.5. [Проверка защиты от передачи большего числа токенов, нежели есть на счёте\.](#_8lq3z7chqqyx)
	
	6.6. [Проверка защиты от переполнения общего числа токенов контракта\.](#_cb18qz4050yr)
	
	6.7. [Проверка работоспособности разрешения на трату токенов\.](#_yzjimmbbbzdb)
	
	6.8. [Проверка защиты от двойной траты токенов — запрет смены разрешения траты\.](#_d9g3y07pbw6x)
	
	6.9. [Проверка защиты от двойной траты токенов — возможность отменить разрешение на трату\.](#_arbf38xof8ld)
	
	6.10. [Проверка невозможности траты токенов без разрешения\.](#_1z08r27425o7)
	
	6.11. [Проверка невозможности траты токенов сверх разрешения\.](#_wx67clltxhci)
	
	6.12. [Проверка невозможности траты токенов в пределах разрешения, но при недостатке их на счёте\.](#_3pqdl2506ybg)
	
	6.13. [Проверка траты токенов\.](#_p6ga6o8ppgmx)

**NEURON Token**

**Техническая документация**



#### <a id="_jv7fkj3n9i1f"></a> 1. Контракт NRN  как основа NEURON Token 

NEURON Token — токен, выпущенный на основе контракта NRN. Количество токенов NEURON Token, выпущенных в ходе ICO, ограничено и составляет 

| Количество токенов | NRN 12 352 860,96 |
|--------------------|-------------------|

Все токены, оставшиеся после этой фазы проекта, будут уничтожены\. 

 NEURON Token \(NRN\) — умный контракт Ethereum, написанный с использованием языка программирования Solidity командой NEURON\. Он позволяет выпускать токены в сети Ethereum и предоставляет широкий набор возможностей:

- распределение доли прибыли, перечисленной контракту, по кошелькам дольщиков соразмерно их количествам токенов;
- cистема разрешений и допусков;
- учёт комиссий при выплате дивидендов;
- учёт веса голосов инвесторов соразмерно количеству токенов при голосовании на крауд\-площадке\.

| **NEURON'S Parameters** | |
|-------------|-----------|
| Name | Neuron |
| Ticker | NRN |
| Доля инвесторов прибыли в доходах NeuronPlatform | 20% |
| Порядок распределения дохода\(Inc\) | <a href="https://www.codecogs.com/eqnedit.php?latex=Inc&space;=&space;NEURONprofit\times&space;20&space;\%&space;\times&space;(\frac{\mathrm{NRNinvestor}&space;}{\mathrm{NRNall}})" target="_blank"><img src="https://latex.codecogs.com/png.latex?Inc&space;=&space;NEURONprofit\times&space;20&space;\%&space;\times&space;(\frac{\mathrm{NRNinvestor}&space;}{\mathrm{NRNall}})" title="Inc = NEURONprofit\times 20 \% \times (\frac{\mathrm{NRNinvestor} }{\mathrm{NRNall}})" /></a> |
| Сроки выплат инвестиционного дохода | После сдачи годовой отчетности |
| Порядок выплат инвестиционного дохода | На ETH кошелек на NEURON |
|  Принцип выплат инвестиционного дохода | На кошельки инвесторов по смарт контракту, пропорционально доли владения NRN |
| Стоимость токена в $ | $5,00 |

NEURON Token \(NRN\)

[https://github\.com/neuronplatform/token ](https://github.com/neuronplatform/token)

#### <a id="_dh33a2y5371r"></a>2. **Система**

#### <a id="_ek5hbln14u9"></a>2.1. Диаграмма взаимодействия на уровне Сети 

Сеть Ethereum обеспечивает среду для взаимодействия между компаниями и пользователями\. Стороны взаимодействуют путем отправки транзакций в контракт NEURON\. Все транзакции проверяются бизнес\-логикой контракта и записываются в блокчейн\. API контракта открыт для всех в интернете, и любой может стать пользователем токена NEURON\. 

#### <a id="_dubhxfjuy36d"></a>2.2. Диаграмма взаимодействия на уровне системы 

Протокол NRN поддерживает 2 основных модели безопасности аккаунта: ключ на стороне пользователя и размещенный кошелек\. 

- **Ключ на стороне пользователя**

В этом случае приватный ключ, который дает доступ к аккаунту, известен только конечному пользователю\. 

- **Размещенный кошелек**

В этом случае финансовая структура \(биржа или поставщик кошелька\) несёт ответственность за ключ безопасности\. Только 1–2 ключа используются из расчёта на одну структуру, и транзакции направляются на аккаунт конкретного пользователя с использованием ICAP\-протокола\.

#### <a id="_hr28y0fdjzes"></a>3. Дивиденды

#### <a id="_motz8s596ftm"></a>3.1. Распределение дивидендов

Процесс распределения дивидендов проходит в два этапа: получение точных данных о распределении NRN между пользователями \(отчёт о дивидендах\) и распределение прибыли компании между владельцами токенов\. 

#### <a id="_1ng0ln1b5ogs"></a>3.2. Механизм начисления дивидендов

Чтобы исключить возможность неправильного адресата начисления дивидендов, на время совершения транзакции начисления происходит блокировка возможности изменения собственника токена\.

Чтобы активность по передаче токенов не влияла на начисление дивидендов, на время, необходимое для окончания процесса выплаты дивидендов контракт будет блокировать операции по передаче токенов\. В этом случае доли инвесторов в течение всего процесса останутся неизменными, что существенно упростить вычисление сумм дивидендов для каждого инвестора\.

#### <a id="_eht0t1et6bxz"></a>3.3. Распределение прибыли 

Платформа NEURON будет ежегодно начислять 20% прибыли компании на смарт\-контракт распределения дивидендов\. Дата распределения дивидендов будет объявлена заранее на сайте NEURON, а также, владельцев NRN дважды оповестят по электронной почте\. Умный контракт распределения дивидендов запрограммирован распределять прибыль между инвесторами в соответствии с их долями\. Все платежи будут осуществляться в ETH\. Дивиденды будут отправлены на адреса, владение которых токенами NRN подтверждено с помощью снимка блокчейн\. 

#### <a id="_fs7kwg8afz5y"></a>4. Обзор

Токенный контракт был реализован с использованием функциональности по безопасной арифметике и защиты от двойной траты токенов\.

Дополнительно была добавлена защита от уязвимости короткого адреса путём проверки суммарной длины входных параметров в байтах для всех публичных функций\.

Для целей тестирования или замены контракта на новую версию при обнаружении новой уязвимости, в контракт добавлены методы для считывания всех данных по балансам и разрешениям трат, что повлекло изменения во всех связанных методах контракта\.

#### <a id="_v7iuojesj3lz"></a>5. Бизнес\-логика контракта

#### <a id="_hx4c423n7p5r"></a>5.1. ERC\-20

5.1.1. Выпуск контракта с фиксированным количеством токенов;

5.1.2. Перевод токенов акционером на произвольный кошелёк;

5.1.3. Разрешение акционером списания \(траты\) его токенов владельцу другого кошелька;

5.1.4. Перевод токенов с чужого кошелька на произвольный кошелёк в рамках, заданных владельцем кошелька, к которому эти токены привязаны\.
#### <a id="_ef7b49xm1tji"></a>5.2. Дополнительная логика


5.2.1. Покупка и продажа токенов за эфир;

5.2.2. Получение дивидендов;

5.2.3. Предоставление владельцу контракта информации о балансах всех акционеров для взвешенного учёта голосов при голосовании за новый проект\.

#### <a id="_kf1n4pr3ksyj"></a>6. Тестирование токенного контракта\.

Для тестирования токенного контракта был поднят приватный блокчейн с тремя аккаунтами: нулевой для майнера, первый — владелец контракта, второй — вторая сторона для контрактных транзакций\.

Были подготовлены следующие автоматические тесты\.

#### <a id="_sch6jj7fschk"></a>6.1. Компиляция и размещение контракта в блокчейне\.

#### <a id="_igrev1wzkdmv"></a>6.2. Проверка состояния контракта после создания\.

#### <a id="_e7gi8x5aiiy0"></a>6.3. Проверка названия и символа токена\.
		
6.3.1. Проверка стоимости токена и количества знаков после запятой\.
		
6.3.2. Проверка суммарного количества токенов в контракте\.
		
6.3.3. Проверка, что все токены находятся на счёте владельца\.

#### <a id="_th9kc88nqmlc"></a>6.4. Проверка возможности передать токены\.

6.4.1. Вызов метода передачи токенов\.

6.4.2. Проверка соответствия балансов ожидаемым значениям\.

#### <a id="_8lq3z7chqqyx"></a>6.5. Проверка защиты от передачи большего числа токенов, нежели есть на счёте\.


6.5.1. Вызов метода передачи токенов\.

6.5.2. Проверка отсутствия изменения балансов\.

#### <a id="_cb18qz4050yr"></a>6.6. Проверка защиты от переполнения общего числа токенов контракта\.

6.6.1. Попытка добавить на счёт количество токенов, такое, что общая сумма будет превышать максимальное для uint256 значение\.
	
6.6.2. Проверка отсутствия изменения балансов\.

#### <a id="_yzjimmbbbzdb"></a>6.7. Проверка работоспособности разрешения на трату токенов\.

6.7.1. Вызов метода разрешения траты\.
6.7.2. Проверка соответствия суммы разрешений выставленному значению\.

#### <a id="_d9g3y07pbw6x"></a>6.8. Проверка защиты от двойной траты токенов — запрет смены разрешения траты\.

6.8.1. При выставленном разрешении попытка выставить другое значение\.

6.8.2. Проверка отсутствия изменения суммы разрешения траты\.

#### <a id="_arbf38xof8ld"></a>6.9. Проверка защиты от двойной траты токенов — возможность отменить разрешение на трату\.


6.9.1. При выставленном разрешении попытка убрать разрешение траты\.

6.9.2. Проверка, что разрешённая к трате сумма равна нулю\.

#### <a id="_1z08r27425o7"></a>6.10. Проверка невозможности траты токенов без разрешения\.


6.10.1. Вызов метода перевода токенов с чужого счёта\.

6.10.2. Проверка отсутствия изменения балансов и сумм разрешения трат\.

#### <a id="_wx67clltxhci"></a>6.11. Проверка невозможности траты токенов сверх разрешения\.


6.11.1. Выставление разрешения на трату токенов с первого счёта второму\.

6.11.2. Вызов метода перевода токенов с первого счёта от лица второго сверх установленного разрешения\.

6.11.3. Проверка отсутствия изменения балансов и сумм разрешения трат\.

#### <a id="_3pqdl2506ybg"></a>6.12. Проверка невозможности траты токенов в пределах разрешения, но при недостатке их на счёте\.


6.12.1. Выставление разрешения на трату токенов с первого счёта второму\.

6.12.2. Вызов метода перевода токенов с первого счёта от лица второго сверх имеющегося баланса\.

6.12.3. Проверка отсутствия изменения балансов и сумм разрешения трат\.

#### <a id="_p6ga6o8ppgmx"></a>6.13. Проверка траты токенов\.


6.13.1. Выставление разрешения на трату токенов с первого счёта второму\.

6.13.2. Вызов метода перевода токенов с первого счёта от лица второго сверх имеющегося баланса\.

6.13.3. Проверка соответствия балансов ожидаемым значениям\.

6.13.4. Проверка соразмерного уменьшения суммы разрешения траты\.

Почти все тесты стало возможным провести благодаря тому, что в контракте дополнительно реализована возможность получения всех балансов и всех разрешений на трату\.

Данные методы разрешено использовать только владельцу контракта\.

Тестирование проводилось с помощью фреймворка jasminejs\.

